(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{13:function(t,i,e){"use strict";var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(i,e,n){return e&&t(i.prototype,e),n&&t(i,n),i}}();function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(i,e){a(this,t),this.id=e,this._type=i,this._attributes=[],this._dependents=[],this._relationships=[],this._links=this.links={},this._relationshipLinks={},this._meta=this.meta={},this._relationshipMeta={},this._destroyed=!1}return n(t,[{key:"_addDependence",value:function(t,i,e){var n,a;n=this._dependents,a=function(n){return n.id===i&&n.type===t&&n.relation===e},void 0===(Array.prototype.find?n.find(a):n.filter(a).shift())&&this._dependents.push({id:i,type:t,relation:e})}},{key:"_removeDependence",value:function(t,i){var e=this;e._dependents.forEach((function(n,a){n.id===i&&n.type===t&&e._dependents.splice(a,1)}))}},{key:"removeRelationship",value:function(t,i,e){var n=this;n._removeDependence(t,i),n[e].constructor===Array?n[e].forEach((function(a,s){a.id===i&&a._type===t&&n[e].splice(s,1)})):n[e].id===i&&(n[e]=null)}},{key:"serialize",value:function(t){var i=this,e={data:{type:this._type}};return(t=t||{}).attributes=t.attributes||this._attributes,t.relationships=t.relationships||this._relationships,t.links=t.links||void 0,t.meta=t.meta||void 0,void 0!==this.id&&(e.data.id=this.id),0!==t.attributes.length&&(e.data.attributes={}),0!==t.relationships.length&&(e.data.relationships={}),t.attributes.forEach((function(t){e.data.attributes[t]=i[t]})),t.relationships.forEach((function(t){function n(t){return{type:t._type,id:t.id}}i[t]?i[t].constructor===Array?e.data.relationships[t]={data:i[t].map(n)}:e.data.relationships[t]={data:n(i[t])}:e.data.relationships[t]={data:null},i._relationshipLinks[t]&&(e.data.relationships[t].links=i._relationshipLinks[t]),i._relationshipMeta[t]&&(e.data.relationships[t].meta=i._relationshipMeta[t])})),0!==Object.keys(this._links).length&&(void 0===t.links?e.data.links=this._links:t.links&&0!==t.links.length&&(e.data.links={},t.links.forEach((function(t){e.data.links[t]=i._links[t]})))),0!==Object.keys(this._meta).length&&(void 0===t.meta?e.data.meta=this._meta:t.meta&&0!==t.meta.length&&(e.data.meta={},t.meta.forEach((function(t){e.data.meta[t]=i._meta[t]})))),e}},{key:"setAttribute",value:function(t,i){void 0===this[t]&&this._attributes.push(t),this[t]=i}},{key:"setRelationship",value:function(t,i){void 0===this[t]?(this._relationships.push(t),this[t]=i):this[t].constructor===Array?this[t].push(i):this[t]=i}}]),t}(),r=function(){function t(){a(this,t),this.graph={},this.order={}}return n(t,[{key:"destroy",value:function(t){var i=this;t._destroyed=!0,t._dependents.forEach((function(e,n){i.graph[e.type][e.id].removeRelationship(t._type,t.id,e.relation)})),delete this.graph[t._type][t.id],this.order[t._type].splice(this.order[t._type].indexOf(t.id),1)}},{key:"find",value:function(t,i){return this.graph[t]&&this.graph[t][i]?this.graph[t][i]:null}},{key:"findAll",value:function(t){var i=this;return this.graph[t]?i.order[t].map((function(e){return i.graph[t][e]})):[]}},{key:"reset",value:function(){this.graph={},this.order={}}},{key:"initModel",value:function(t,i){this.graph[t]=this.graph[t]||{},this.order[t]=this.order[t]||[],this.graph[t][i]=this.graph[t][i]||new s(t,i);var e=this.order[t].indexOf(i);return-1===e?this.order[t].push(i):(this.order[t].splice(e,1),this.order[t].push(i)),this.graph[t][i]}},{key:"syncRecord",value:function(t){var i,e=this,n=this.initModel(t.type,t.id);function a(t){e.find(t.type,t.id)||(e.initModel(t.type,t.id)._placeHolder=!0);return e.graph[t.type][t.id]}for(i in delete n._placeHolder,t.attributes)-1===n._attributes.indexOf(i)&&n._attributes.push(i),n[i]=t.attributes[i];if(t.links&&(n._links=n.links=t.links),t.meta&&(n._meta=n.meta=t.meta),t.relationships)for(i in t.relationships){var s=t.relationships[i];void 0!==s.data&&(-1===n._relationships.indexOf(i)&&n._relationships.push(i),null===s.data?n[i]=null:s.data.constructor===Array?(n[i]=s.data.map(a),n[i].forEach((function(t){t._addDependence(n._type,n.id,i)}))):(n[i]=a(s.data),n[i]._addDependence(n._type,n.id,i))),s.links&&(n._relationshipLinks[i]=s.links),s.meta&&(n._relationshipMeta[i]=s.meta)}return n}},{key:"sync",value:function(t,i){var e=t.data,n=this.syncRecord.bind(this),a={};return(i=i||{}).topLevel=i.topLevel||!1,"meta"in t&&(a.meta=t.meta),"links"in t&&(a.links=t.links),"jsonapi"in t&&(a.jsonapi=t.jsonapi),t.errors?(a.errors=t.errors,a):e?(t.included&&t.included.map(n),a.data=e.constructor===Array?e.map(n):n(e),i.topLevel?a:a.data):[]}}]),t}();t.exports.Store=r,t.exports.Model=s}}]);